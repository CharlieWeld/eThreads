package gradeApp;

import java.util.ArrayList;
import java.io.*;
import java.lang.*;
import java.util.*;

public class GradesDB {

    // Member variables
    private int userNumber;
    private String passwords[];
    private ArrayList<String> grades;

    public GradesDB(){
        // Initialise the student numbers, passwords and grades
        passwords = getPasswords();
        grades = new ArrayList<String>();
        grades.add("grade1");
        grades.add("grade2");
        grades.add("grade3");
    }

    // logged in user by assigning a number to userNumber
    public boolean login(int user, String pass){
        if(this.passwords[user].equals(pass)) {
            userNumber = user;
            return true;
        }
        else
            return false;
    }

    public String getGrade(){
        return grades.get(userNumber);
    }

    // get passwords and grades from text files
    private String[] getPasswords(){
    	Scanner x;
    	ArrayList<String> strArr = new ArrayList<String>();
    	
    	try{
    		x = new Scanner(new File("passwords.txt"));
    		
    		// read file line by line
    		
    		while(x.hasNextLine()){
    			strArr.add(x.nextLine());
    		}
    		x.close();
    	}catch(Exception e){}
    	
    	String[] str = new String[strArr.size()];
    	for(int i=0; i<str.length; i++)
    		str[i] = strArr.get(i);
    	return str;
    }

    // save passowrds and grades to text files
    private void savePasswords(){
    	Formatter x;
    	
    	try{
    		x = new Formatter("passwords.txt");
    		for(int i =0; i<passwords.length; i++){
    			x.format("%s\n", passwords[i]);
    		}
    		x.close();
    		
    	}catch(Exception e){}
    	
    	// write to file
    	
    }
    public static void main(String args[]){

        // Initialise GradeDB object
        GradesDB gradeDB = new GradesDB();
        Scanner scan = new Scanner(System.in);

        // get user info
        System.out.print("Enter your student number: ");
        int num = Integer.parseInt(scan.nextLine());
        System.out.print("Enter your password: ");
        String pass = scan.next();

        // log user in and return their grade info
        if (gradeDB.login(num, pass))
            System.out.println(gradeDB.getGrade());
        else
            System.out.println("Incorrect Password");
        
      
    }
}
